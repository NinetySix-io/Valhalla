# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

directive @key(fields: String!, resolvable: Boolean = true) repeatable on OBJECT | INTERFACE

directive @extends on OBJECT | INTERFACE

directive @external on OBJECT | FIELD_DEFINITION

directive @requires(fields: String!) on FIELD_DEFINITION

directive @provides(fields: String!) on FIELD_DEFINITION

directive @shareable on FIELD_DEFINITION | OBJECT

directive @link(url: String!, import: [link__Import]) on SCHEMA

directive @tag(name: String!) repeatable on FIELD_DEFINITION | OBJECT | INTERFACE | UNION | ARGUMENT_DEFINITION | SCALAR | ENUM | ENUM_VALUE | INPUT_OBJECT | INPUT_FIELD_DEFINITION

directive @inaccessible on FIELD_DEFINITION | OBJECT | INTERFACE | UNION | ARGUMENT_DEFINITION | SCALAR | ENUM | ENUM_VALUE | INPUT_OBJECT | INPUT_FIELD_DEFINITION

directive @override(from: String!) on FIELD_DEFINITION

type AccountEmail {
  value: EmailAddress!
  isVerified: Boolean!
  isPrimary: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A field whose value conforms to the standard internet email address format as specified in RFC822: https://www.w3.org/Protocols/rfc822/.
"""
scalar EmailAddress @specifiedBy(url: "https://www.w3.org/Protocols/rfc822/")

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type AccountPhone {
  value: PhoneNumber!
  isVerified: Boolean!
  isPrimary: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A field whose value conforms to the standard E.164 format as specified in: https://en.wikipedia.org/wiki/E.164. Basically this is +17895551234.
"""
scalar PhoneNumber

type Account {
  id: ObjectID!
  displayName: String!
  firstName: String!
  lastName: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  emails: [AccountEmail!]!
  phones: [AccountPhone!]!
}

"""
A field whose value conforms with the standard mongodb object ID as described here: https://docs.mongodb.com/manual/reference/method/ObjectId/#ObjectId. Example: 5e5677d71bdc2ae76344968c
"""
scalar ObjectID

type TokenResponse {
  """Token"""
  value: String!

  """Token expiry"""
  expiresAt: DateTime!
}

type AuthResponse {
  """Logged in Account ID"""
  accountId: String!

  """Access token"""
  accessToken: TokenResponse!
}

type SessionResponse {
  id: ObjectID!
  displayName: String!
}

type Query {
  """Generate an access token"""
  accessToken(
    """Auth for organization"""
    organizationId: ObjectID
  ): TokenResponse!

  """Get current session user"""
  session: SessionResponse!

  """Get current logged in user information"""
  account: Account!

  """Validate verification code"""
  validateVerificationCode(
    """Verification ID"""
    verificationId: String!

    """Verification Code"""
    verificationCode: String!
  ): Boolean!
}

type Mutation {
  """Register user account"""
  registerAccount(
    displayName: String
    firstName: String
    lastName: String

    """Email Address"""
    email: EmailAddress!

    """Phone Number"""
    phone: PhoneNumber
  ): AuthResponse!

  """Login to account with verification code"""
  loginWithVerification(
    """Username"""
    username: String!

    """Verification Code"""
    verificationCode: String!

    """Verification Sent"""
    verificationId: String!
  ): AuthResponse!

  """Invalid current session"""
  logout: Void!

  """Update account"""
  updateAccount(displayName: String, firstName: String, lastName: String): Boolean!

  """Add email address to account"""
  addEmailToAccount(email: EmailAddress!): Boolean!

  """Add phone number to account"""
  addPhoneToAccount(phone: PhoneNumber!): Boolean!

  """Remove associated email from account"""
  removeEmailFromAccount(emailId: ObjectID!): Boolean!

  """Remove associated phone from account"""
  removePhoneFromAccount(phoneId: ObjectID!): Boolean!

  """Send verification code to email"""
  sendVerificationCode(
    """Sending verification code target"""
    destination: String!

    """Verification channel"""
    channel: VerificationChannel!
  ): String!
}

"""Represents NULL values"""
scalar Void

enum VerificationChannel {
  EMAIL
  SMS
}

scalar link__Import